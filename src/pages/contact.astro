---
import BaseLayout from '@layouts/BaseLayout.astro';
import Header from '@components/Header.astro';
import Footer from '@components/Footer.astro';
import Breadcrumbs from '@components/Breadcrumbs.astro';
import MapEmbed from '@components/MapEmbed.astro';
import { contactConfig, socialConfig } from '@/config/site';

const breadcrumbs = [
  { label: 'Acasă', href: '/' },
  { label: 'Contact' },
];
---

<BaseLayout
  title="Contact | Apartamente Gara Peris"
  description="Contactează-ne pentru mai multe informații despre apartamentele din Gara Peris. Telefon, email sau programează o vizită."
>
  <Header slot="header" currentPage="contact" />

  <!-- Intro Section -->
  <section class="intro-single">
    <div class="container">
      <div class="row">
        <div class="col-md-12 col-lg-8">
          <div class="title-single-box">
            <h1 class="title-single">Contactează-ne</h1>
            <span class="color-text-a">Suntem aici să te ajutăm</span>
          </div>
        </div>
        <div class="col-md-12 col-lg-4">
          <Breadcrumbs items={breadcrumbs} />
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="contact">
    <div class="container">
      <div class="row">
        <!-- Contact Info -->
        <div class="col-md-5 section-md-t3">
          <div class="contact-info-box mb-4">
            <h3 class="title-b mb-4">Informații de contact</h3>

            <div class="d-flex mb-4">
              <div class="icon-box me-3">
                <span class="bi bi-geo-alt-fill text-success fs-4"></span>
              </div>
              <div>
                <h5 class="mb-1">Adresă</h5>
                <p class="color-text-a mb-0">
                  {contactConfig.address.street}<br />
                  {contactConfig.address.city}, {contactConfig.address.county}<br />
                  {contactConfig.address.country}
                </p>
              </div>
            </div>

            <div class="d-flex mb-4">
              <div class="icon-box me-3">
                <span class="bi bi-telephone-fill text-success fs-4"></span>
              </div>
              <div>
                <h5 class="mb-1">Telefon</h5>
                <p class="color-text-a mb-0">
                  <a href={`tel:${contactConfig.phone}`}>{contactConfig.phoneFormatted}</a>
                </p>
              </div>
            </div>

            <div class="d-flex mb-4">
              <div class="icon-box me-3">
                <span class="bi bi-whatsapp text-success fs-4"></span>
              </div>
              <div>
                <h5 class="mb-1">WhatsApp</h5>
                <p class="color-text-a mb-0">
                  <a href={`https://wa.me/${contactConfig.whatsapp}`} target="_blank">
                    Trimite mesaj pe WhatsApp
                  </a>
                </p>
              </div>
            </div>

            <div class="d-flex mb-4">
              <div class="icon-box me-3">
                <span class="bi bi-envelope-fill text-success fs-4"></span>
              </div>
              <div>
                <h5 class="mb-1">Email</h5>
                <p class="color-text-a mb-0">
                  <a href={`mailto:${contactConfig.email}`}>{contactConfig.email}</a>
                </p>
              </div>
            </div>

            <div class="d-flex mb-4">
              <div class="icon-box me-3">
                <span class="bi bi-facebook text-success fs-4"></span>
              </div>
              <div>
                <h5 class="mb-1">Facebook</h5>
                <p class="color-text-a mb-0">
                  <a href={socialConfig.facebook} target="_blank">
                    Urmărește-ne pe Facebook
                  </a>
                </p>
              </div>
            </div>

            <div class="d-flex">
              <div class="icon-box me-3">
                <span class="bi bi-clock-fill text-success fs-4"></span>
              </div>
              <div>
                <h5 class="mb-1">Program vizite</h5>
                <p class="color-text-a mb-0">
                  Luni - Sâmbătă: 09:00 - 18:00<br />
                  Duminică: Cu programare
                </p>
              </div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="quick-actions mt-4">
            <a href={`tel:${contactConfig.phone}`} class="btn btn-success btn-lg w-100 mb-3">
              <i class="bi bi-telephone-fill me-2"></i>
              Sună acum
            </a>
            <a href={`https://wa.me/${contactConfig.whatsapp}`} target="_blank" class="btn btn-outline-success btn-lg w-100">
              <i class="bi bi-whatsapp me-2"></i>
              Scrie pe WhatsApp
            </a>
          </div>
        </div>

        <!-- Contact Form -->
        <div class="col-md-7 section-md-t3">
          <div class="contact-form-box">
            <h3 class="title-b mb-4">Trimite-ne un mesaj</h3>
            <form id="contact-form" class="form-a">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <div class="form-group">
                    <input type="text" name="name" class="form-control form-control-lg" placeholder="Nume complet *" required />
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <div class="form-group">
                    <input type="email" name="email" class="form-control form-control-lg" placeholder="Email *" required />
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <div class="form-group">
                    <input type="tel" name="phone" class="form-control form-control-lg" placeholder="Telefon" />
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                  <div class="form-group">
                    <select name="subject" class="form-select form-select-lg">
                      <option value="">Selectează subiectul</option>
                      <option value="informatii">Informații generale</option>
                      <option value="vizita">Programare vizită</option>
                      <option value="pret">Întrebare despre preț</option>
                      <option value="altele">Altele</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-12 mb-3">
                  <div class="form-group">
                    <textarea name="message" class="form-control" rows="5" placeholder="Mesajul tău *" required></textarea>
                  </div>
                </div>
                <div class="col-md-12">
                  <button type="submit" class="btn btn-success btn-lg">
                    <i class="bi bi-send me-2"></i>
                    Trimite mesajul
                  </button>
                </div>
              </div>
            </form>
            <div id="form-message" class="mt-3" style="display: none;"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Map Section -->
  <MapEmbed title="Ne găsești aici" />

  <Footer slot="footer" />
</BaseLayout>

<style>
  .contact-info-box {
    background: #f8f9fa;
    padding: 30px;
    border-radius: 8px;
  }

  .contact-form-box {
    background: #fff;
    padding: 30px;
    border-radius: 8px;
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
  }

  .icon-box {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const messageDiv = document.getElementById('form-message');

  if (form && messageDiv) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // For now, show a success message (implement actual form handling later)
      // Form data can be accessed with: new FormData(form)
      messageDiv.innerHTML = `
        <div class="alert alert-success">
          <i class="bi bi-check-circle-fill me-2"></i>
          Mulțumim pentru mesaj! Te vom contacta în curând.
        </div>
      `;
      messageDiv.style.display = 'block';
      form.reset();

      // Hide message after 5 seconds
      setTimeout(() => {
        messageDiv.style.display = 'none';
      }, 5000);
    });
  }
</script>
